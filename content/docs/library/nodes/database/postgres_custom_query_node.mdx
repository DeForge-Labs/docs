---
title: PostgreSQL - Custom Query
description: Executes a custom SQL query with parameters. For advanced users.
tags: ["postgres", "database", "custom", "sql", "raw"] 
github: https://github.com/DeForge-Labs/library/blob/main/database/postgres_custom_query_node/node.js
difficulty: hard
credits: 5
---

import { Badge } from '@/components/ui/badge';
import { ImageZoom } from '@/components/image-zoom';
import { getColorByType } from '@/lib/color-profile';

<ImageZoom
  src="https://vcpnsfarucvradpvntni.supabase.co/storage/v1/object/public/docs/postgres_custom_query_node_light.png"
  data-dark-src="https://vcpnsfarucvradpvntni.supabase.co/storage/v1/object/public/docs/postgres_custom_query_node_dark.png"
  alt="PostgreSQL - Custom Query Node Screenshot"
  className="mx-auto"
/>

---

## Description
The PostgreSQL - Custom Query node allows you to execute any SQL query on your PostgreSQL database. This node is designed for advanced users who need more flexibility than the standard query nodes provide. You can write complex SQL statements, including joins, subqueries, and transactions.

### Common Use Cases
- Execute complex queries that involve multiple tables
- Perform database maintenance tasks
- Run batch updates or deletes based on specific conditions

## Inputs
The input connections this node accepts:

<DataTable>
  <DataHeader>
    <DataName>Name</DataName>
    <DataDesc>Description</DataDesc>
    <DataType>Type</DataType>
  </DataHeader>
  <DataRow>
    <DataName>Flow</DataName>
    <DataDesc>
    <DescLine>The flow of the workflow</DescLine>
    </DataDesc>
    <DataType><Badge dotColor={getColorByType('flow')}>Flow</Badge></DataType>
  </DataRow>
  <DataRow>
    <DataName>Query</DataName>
    <DataDesc>
    <DescLine>The raw SQL query to execute, using $1, $2, etc. for placeholders</DescLine>
    </DataDesc>
    <DataType><Badge dotColor={getColorByType('text')}>Text</Badge></DataType>
  </DataRow>
  <DataRow>
    <DataName>Parameters</DataName>
    <DataDesc>
    <DescLine>The values for the placeholders in the query</DescLine>
    </DataDesc>
    <DataType><Badge dotColor={getColorByType('text[]')}>Text[]</Badge></DataType>
  </DataRow>
</DataTable>

## Outputs
The output connections this node provides:

<DataTable>
  <DataHeader>
    <DataName>Name</DataName>
    <DataDesc>Description</DataDesc>
    <DataType>Type</DataType>
  </DataHeader>
  <DataRow>
    <DataName>rows</DataName>
    <DataDesc>
    <DescLine>The array of rows returned by the query (if any)</DescLine>
    </DataDesc>
    <DataType><Badge dotColor={getColorByType('json')}>JSON</Badge></DataType>
  </DataRow>
  <DataRow>
    <DataName>rowCount</DataName>
    <DataDesc>
    <DescLine>The number of rows affected or returned</DescLine>
    </DataDesc>
    <DataType><Badge dotColor={getColorByType('number')}>Number</Badge></DataType>
  </DataRow>
  <DataRow>
    <DataName>Tool</DataName>
    <DataDesc>
    <DescLine>The tool version of this node, to be used by LLMs</DescLine>
    </DataDesc>
    <DataType><Badge dotColor={getColorByType('tool')}>Tool</Badge></DataType>
  </DataRow>
</DataTable>

## Fields
The configurable fields this node provides:

<DataTable>
  <DataHeader>
    <DataName>Name</DataName>
    <DataDesc>Description</DataDesc>
    <DataType>Type</DataType>
  </DataHeader>
  <DataRow>
    <DataName>Query</DataName>
    <DataDesc>
    <DescLine>The raw SQL query to execute, using $1, $2, etc. for placeholders</DescLine>
    <DescLine>**Value:** `SELECT * FROM users WHERE status = $1 LIMIT 10;`</DescLine>
    </DataDesc>
    <DataType><Badge dotColor={getColorByType('textarea')}>TextArea</Badge></DataType>
  </DataRow>
  <DataRow>
    <DataName>Parameters</DataName>
    <DataDesc>
    <DescLine>The values for the placeholders in the query</DescLine>
    <DescLine>**Value:** `Enter values here...`</DescLine>
    </DataDesc>
    <DataType><Badge dotColor={getColorByType('text[]')}>Text[]</Badge></DataType>
  </DataRow>
  <DataRow>
    <DataName>PG_CONNECTION_STRING</DataName>
    <DataDesc>
    <DescLine>Postgres connection string</DescLine>
    <DescLine>**DefaultValue:** `postgres://user:password@localhost:5432/dbname`</DescLine>
    </DataDesc>
    <DataType><Badge dotColor={getColorByType('env')}>env</Badge></DataType>
  </DataRow>
</DataTable>